<!DOCTYPE html>
<html>
<head>
  <title>Activity 4E: CAR Database (AI-Enhanced)</title>
  <meta charset="UTF-8">
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    textarea { width: 100%; margin-top: 5px; }
    .feedback { font-weight: bold; margin-top: 5px; }
    button { margin-top: 10px; }
  </style>
</head>
<body>

<h1>Activity 4E: CAR Database (AI-Enhanced)</h1>

  <h3>CUSTOMER</h3>
<table border="1">
  <tr><th>CUSTID</th><th>CUSTNAME</th><th>CAR_NUMBER</th><th>PHONE_NUMBER</th><th>REGISTER_DATE</th></tr>
  <tr><td>C0001</td><td>David Teo</td><td>WUV2318</td><td>81691</td><td>2014-01-09</td></tr>
  <tr><td>C0002</td><td>Sulaiman Ali</td><td>JKJ9782</td><td>61291</td><td>2011-05-07</td></tr>
  <tr><td>C0003</td><td>Kang Gary</td><td>MAM123</td><td>41972</td><td>2010-06-13</td></tr>
  <tr><td>C0004</td><td>Ji Hyo</td><td>SA4888</td><td>11341</td><td>2012-09-26</td></tr>
  <tr><td>C0005</td><td>Karigalan</td><td>KUL511</td><td>21412</td><td>2003-07-18</td></tr>
</table>

<h3>CAR_COMPONENT</h3>
<table border="1">
  <tr><th>COMPID</th><th>COMPNAME</th><th>PRICE</th></tr>
  <tr><td>KK001</td><td>ISWARA Rear Lamp</td><td>100</td></tr>
  <tr><td>KK002</td><td>WIRA Front Bumper</td><td>450</td></tr>
  <tr><td>KK003</td><td>ISWARA Front Mirror</td><td>300</td></tr>
  <tr><td>KK004</td><td>WAJA Break Lamp</td><td>250</td></tr>
  <tr><td>KK005</td><td>WIRA Front Lamp</td><td>600</td></tr>
</table>

<h3>CLAIM</h3>
<table border="1">
  <tr><th>CLAIMID</th><th>CLAIM_DATE</th><th>CUSTID</th></tr>
  <tr><td>CL001</td><td>2014-04-19</td><td>C0005</td></tr>
  <tr><td>CL002</td><td>2014-01-28</td><td>C0001</td></tr>
  <tr><td>CL003</td><td>2014-02-20</td><td>C0003</td></tr>
  <tr><td>CL004</td><td>2014-09-30</td><td>C0002</td></tr>
  <tr><td>CL005</td><td>2014-12-07</td><td>C0004</td></tr>
</table>

<h3>COMPONENT_CLAIM</h3>
<table border="1">
  <tr><th>CLAIMID</th><th>COMPID</th><th>QUANTITY</th></tr>
  <tr><td>CL001</td><td>KK001</td><td>1</td></tr>
  <tr><td>CL003</td><td>KK003</td><td>2</td></tr>
  <tr><td>CL002</td><td>KK002</td><td>1</td></tr>
  <tr><td>CL005</td><td>KK005</td><td>1</td></tr>
  <tr><td>CL004</td><td>KK004</td><td>2</td></tr>
</table>

<hr>

<h2>Database Schema</h2>
<pre>
CUSTOMER(CUSTID, CUSTNAME, CAR_NUMBER, PHONE_NUMBER, REGISTER_DATE)
CAR_COMPONENT(COMPID, COMPNAME, PRICE)
CLAIM(CLAIMID, CLAIM_DATE, CUSTID)
COMPONENT_CLAIM(CLAIMID, COMPID, QUANTITY)
</pre>

<hr>

<script>
function checkAnswer(button, correctAnswers) {
  const container = button.closest('li');
  const textarea = container.querySelector('textarea');
  const feedback = container.querySelector('.feedback');
  const userAnswer = textarea.value.trim().toLowerCase().replace(/\s+/g, " ");

  const normalizedCorrect = correctAnswers.map(answer => 
    answer.toLowerCase().replace(/\s+/g, " ").replace(/;/g, "").trim()
  );

  const normalizedUser = userAnswer.replace(/;/g, "").trim();

  if (normalizedCorrect.includes(normalizedUser)) {
    feedback.innerHTML = "✅ Correct!";
    feedback.style.color = "green";
  } else {
    feedback.innerHTML = "❌ Try again. Expected something like: " + correctAnswers[0];
    feedback.style.color = "red";
  }
}
</script>


<!-- QUESTIONS -->
<ol>
  <li>
    <p><b>Create table CUSTOMER.The following details provided:</b></p>
    <p><b>CUSTID VARCHAR(5), CUSTNAME VARCHAR(100), CAR_NUMBER VARCHAR(10), PHONE_NUMBER VARCHAR(15), REGISTER_DATE DATE</b></p>
    <textarea rows="5" placeholder="Write your SQL here..."></textarea>
    <br>
   <button onclick="checkAnswer(this, [
  'CREATE TABLE CUSTOMER (CUSTID VARCHAR(5) PRIMARY KEY, CUSTNAME VARCHAR(100), CAR_NUMBER VARCHAR(10), PHONE_NUMBER VARCHAR(15), REGISTER_DATE DATE)',
  'CREATE TABLE CUSTOMER (CUSTID TEXT PRIMARY KEY, CUSTNAME TEXT, CAR_NUMBER TEXT, PHONE_NUMBER TEXT, REGISTER_DATE DATE)',
  'create table customer (custid text, custname text, car_number text, phone_number text, register_date date)'
])">Check Answer</button>
    <p class="feedback"></p>
  </li>

  <li>
  <p><b>Insert all data into customer table.</b></p>
 <textarea rows="12" placeholder="Write your SQL here..."></textarea>
  <br>
  <button onclick="checkAnswer(this, [
    `INSERT INTO CUSTOMER VALUES ('C0001', 'David Teo', 'WUV2318', '81691', '2014-01-09');
INSERT INTO CUSTOMER VALUES ('C0002', 'Ahmad Amir', 'WUV5643', '81791', '2014-02-12');
INSERT INTO CUSTOMER VALUES ('C0003', 'Rafidah Yusof', 'WUW6744', '81881', '2014-02-20');
INSERT INTO CUSTOMER VALUES ('C0004', 'Nurul Afiqah', 'WUX3467', '81991', '2014-02-28');
`
  ])">Check Answer</button>
  <p class="feedback"></p>
</li>

 <li>
    <p><b>Display all records from CUSTOMER table.</b></p>
    <textarea rows="2" placeholder="Write your SQL here..."></textarea>
    <br>
    <button onclick="checkAnswer(this, ['SELECT * FROM CUSTOMER;', 'select * from customer;'])">Check Answer</button>
    <p class="feedback"></p>
  </li>

  <li>
    <p><b>Display the name and price from CAR_COMPONENT table.</b></p>
    <textarea rows="2" placeholder="Write your SQL here..."></textarea>
    <br>
    <button onclick="checkAnswer(this, ['SELECT NAME, PRICE FROM CAR_COMPONENT;', 'select name, price from car_component;'])">Check Answer</button>
    <p class="feedback"></p>
  </li>

  <li>
    <p><b>Find the total number of components.</b></p>
    <textarea rows="2" placeholder="Write your SQL here..."></textarea>
    <br>
    <button onclick="checkAnswer(this, ['SELECT COUNT(*) FROM CAR_COMPONENT;', 'select count(*) from car_component;'])">Check Answer</button>
    <p class="feedback"></p>
  </li>

  <li>
    <p><b>Find the total price of all components.</b></p>
    <textarea rows="2" placeholder="Write your SQL here..."></textarea>
    <br>
    <button onclick="checkAnswer(this, ['SELECT SUM(PRICE) FROM CAR_COMPONENT;', 'select sum(price) from car_component;'])">Check Answer</button>
    <p class="feedback"></p>
  </li>

  <li>
    <p><b>Find the maximum component price.</b></p>
    <textarea rows="2" placeholder="Write your SQL here..."></textarea>
    <br>
    <button onclick="checkAnswer(this, ['SELECT MAX(PRICE) FROM CAR_COMPONENT;', 'select max(price) from car_component;'])">Check Answer</button>
    <p class="feedback"></p>
  </li>

  <li>
    <p><b>List all jobs done by mechanic M0001.</b></p>
    <textarea rows="2" placeholder="Write your SQL here..."></textarea>
    <br>
    <button onclick="checkAnswer(this, [`SELECT * FROM JOB WHERE MECHANIC_ID = 'M0001';`, `select * from job where mechanic_id = 'M0001';`])">Check Answer</button>
    <p class="feedback"></p>
  </li>

  <li>
    <p><b>Display customer name and component name for each job.</b></p>
    <textarea rows="4" placeholder="Write your SQL here..."></textarea>
    <br>
    <button onclick="checkAnswer(this, [`
SELECT CUSTOMER.CUST_NAME, CAR_COMPONENT.NAME
FROM JOB
JOIN CUSTOMER ON JOB.CUST_ID = CUSTOMER.CUST_ID
JOIN CAR_COMPONENT ON JOB.COMP_ID = CAR_COMPONENT.COMP_ID;`])">Check Answer</button>
    <p class="feedback"></p>
  </li>
</ol>

</body>
</html>
