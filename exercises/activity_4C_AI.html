<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Activity 4C - SQL Table Creation</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 30px; line-height: 1.6; }
    textarea {
      width: 100%; height: 160px; font-family: monospace;
      border: 1px solid #ccc; padding: 10px; box-sizing: border-box;
    }
    .feedback, .hint, .sample {
      background: #f9f9f9; padding: 10px;
      border-left: 4px solid #007BFF; margin-top: 10px; white-space: pre-wrap;
    }
    button {
      padding: 6px 12px; margin: 5px 5px 5px 0;
      border: none; cursor: pointer; font-size: 14px;
      background-color: #007BFF; color: white; border-radius: 4px;
    }
    button:hover {
      background-color: #0056b3;
    }
    .row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; }
    .button-group { margin-top: 5px; }
    h3 { margin-top: 40px; }
    details summary {
      cursor: pointer;
      font-weight: bold;
    }
    .section-block {
      border: 1px solid #ddd; padding: 15px; margin-bottom: 25px;
      border-radius: 5px; background-color: #fcfcfc;
    }
  </style>
</head>
<body>

<h2>Activity 4C: Create Tables for SweetHome Database</h2>
<p><strong>Instructions:</strong> Write <code>CREATE TABLE</code> SQL statements for each of the six tables. Include <strong>PRIMARY KEY</strong> and <strong>FOREIGN KEY</strong> constraints where applicable.</p>

<hr>

<script>
const tables = [
  {
    name: "Branch",
    id: "branch",
    hint: "Use branchNo as PRIMARY KEY. Include street, city, postcode as VARCHAR fields.",
    sample: `CREATE TABLE Branch (
  branchNo VARCHAR(5) PRIMARY KEY,
  street VARCHAR(50),
  city VARCHAR(30),
  postcode VARCHAR(10)
);`
  },
  {
    name: "Staff",
    id: "staff",
    hint: "Use staffNo as PRIMARY KEY. Include foreign key branchNo referencing Branch(branchNo).",
    sample: `CREATE TABLE Staff (
  staffNo VARCHAR(5) PRIMARY KEY,
  fName VARCHAR(30),
  lName VARCHAR(30),
  position VARCHAR(30),
  gender CHAR(1),
  DOB DATE,
  salary DECIMAL(10,2),
  branchNo VARCHAR(5),
  FOREIGN KEY (branchNo) REFERENCES Branch(branchNo)
);`
  },
  {
    name: "PropertyForRent",
    id: "property",
    hint: "Use propertyNo as PRIMARY KEY. Use foreign keys: ownerNo, staffNo, branchNo.",
    sample: `CREATE TABLE PropertyForRent (
  propertyNo VARCHAR(5) PRIMARY KEY,
  type VARCHAR(30),
  rooms INT,
  rent DECIMAL(10,2),
  ownerNo VARCHAR(5),
  staffNo VARCHAR(5),
  branchNo VARCHAR(5),
  FOREIGN KEY (ownerNo) REFERENCES PrivateOwner(ownerNo),
  FOREIGN KEY (staffNo) REFERENCES Staff(staffNo),
  FOREIGN KEY (branchNo) REFERENCES Branch(branchNo)
);`
  },
  {
    name: "Client",
    id: "client",
    hint: "Use clientNo as PRIMARY KEY. No foreign keys needed.",
    sample: `CREATE TABLE Client (
  clientNo VARCHAR(5) PRIMARY KEY,
  fName VARCHAR(30),
  lName VARCHAR(30),
  telNo VARCHAR(15),
  prefType VARCHAR(30),
  maxRent DECIMAL(10,2),
  email VARCHAR(50)
);`
  },
  {
    name: "PrivateOwner",
    id: "owner",
    hint: "Use ownerNo as PRIMARY KEY. Include personal contact details.",
    sample: `CREATE TABLE PrivateOwner (
  ownerNo VARCHAR(5) PRIMARY KEY,
  fName VARCHAR(30),
  lName VARCHAR(30),
  address VARCHAR(100),
  telNo VARCHAR(15),
  email VARCHAR(50),
  password VARCHAR(20)
);`
  },
  {
    name: "Viewing",
    id: "viewing",
    hint: "Composite PRIMARY KEY (clientNo, propertyNo, viewDate). Foreign keys to Client and PropertyForRent.",
    sample: `CREATE TABLE Viewing (
  clientNo VARCHAR(5),
  propertyNo VARCHAR(5),
  viewDate DATE,
  comments TEXT,
  PRIMARY KEY (clientNo, propertyNo, viewDate),
  FOREIGN KEY (clientNo) REFERENCES Client(clientNo),
  FOREIGN KEY (propertyNo) REFERENCES PropertyForRent(propertyNo)
);`
  }
];

function generateSection(table) {
  return `
<div class="section-block">
  <h3>${table.name} Table</h3>
  <textarea id="${table.id}" placeholder="Write your CREATE TABLE statement for ${table.name}..."></textarea>
  <div class="row">
    <div class="button-group">
      <button onclick="check('${table.id}', '${table.name}')">Check Answer</button>
      <button onclick="toggleDetails('hint_${table.id}')">üí° Hint</button>
      <button onclick="toggleDetails('sample_${table.id}')">üëÄ Sample</button>
    </div>
  </div>
  <div class="feedback" id="feedback_${table.id}"></div>
  <details id="hint_${table.id}" style="display:none;"><summary>Hint</summary><div class="hint">${table.hint}</div></details>
  <details id="sample_${table.id}" style="display:none;"><summary>Sample Answer</summary><div class="sample">${table.sample}</div></details>
</div>
`;
}

function check(id, name) {
  const answer = document.getElementById(id).value.toLowerCase();
  let fb = "";

  if (answer.includes("create table")) {
    fb += `‚úÖ Your answer includes a CREATE TABLE statement.\n`;
  } else {
    fb += `‚ùå Missing CREATE TABLE keyword.\n`;
  }

  if (answer.includes("primary key")) {
    fb += `‚úÖ Primary key included.\n`;
  } else {
    fb += `‚ö†Ô∏è Consider including a PRIMARY KEY.\n`;
  }

  if (answer.includes("foreign key")) {
    fb += `‚úÖ Foreign key(s) detected.\n`;
  } else {
    fb += `‚ÑπÔ∏è If applicable, add FOREIGN KEY constraints.\n`;
  }

  document.getElementById(`feedback_${id}`).textContent = fb;
}

function toggleDetails(id) {
  const el = document.getElementById(id);
  el.style.display = el.style.display === "none" ? "block" : "none";
}
</script>

<div id="exerciseContainer">
  <script>
    document.getElementById("exerciseContainer").innerHTML = tables.map(generateSection).join('');
  </script>
</div>

</body>
</html>
