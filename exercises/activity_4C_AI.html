<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Activity 4C - SQL Table Creation</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 30px; line-height: 1.6; }
    textarea { width: 100%; height: 160px; margin-bottom: 10px; font-family: monospace; }
    .feedback, .hint, .sample { background: #f0f0f0; padding: 10px; border-left: 5px solid #444; white-space: pre-wrap; margin-bottom: 15px; }
    button { padding: 8px 16px; margin: 5px 0; }
    h3 { margin-top: 40px; }
    details { margin-bottom: 10px; }
  </style>
</head>
<body>

<h2>Activity 4C: Create Tables for SweetHome Database</h2>
<p><strong>Instructions:</strong> Write <code>CREATE TABLE</code> SQL statements for each of the six tables. Include <strong>PRIMARY KEY</strong> and <strong>FOREIGN KEY</strong> constraints where applicable.</p>

<hr>

<script>
const tables = [
  {
    name: "Branch",
    id: "branch",
    hint: "Use branchNo as PRIMARY KEY. Include street, city, postcode as VARCHAR fields.",
    sample: `CREATE TABLE Branch (
  branchNo VARCHAR(5) PRIMARY KEY,
  street VARCHAR(50),
  city VARCHAR(30),
  postcode VARCHAR(10)
);`
  },
  {
    name: "Staff",
    id: "staff",
    hint: "Use staffNo as PRIMARY KEY. Include foreign key branchNo referencing Branch(branchNo).",
    sample: `CREATE TABLE Staff (
  staffNo VARCHAR(5) PRIMARY KEY,
  fName VARCHAR(30),
  lName VARCHAR(30),
  position VARCHAR(30),
  gender CHAR(1),
  DOB DATE,
  salary DECIMAL(10,2),
  branchNo VARCHAR(5),
  FOREIGN KEY (branchNo) REFERENCES Branch(branchNo)
);`
  },
  {
    name: "PropertyForRent",
    id: "property",
    hint: "Use propertyNo as PRIMARY KEY. Use foreign keys: ownerNo, staffNo, branchNo.",
    sample: `CREATE TABLE PropertyForRent (
  propertyNo VARCHAR(5) PRIMARY KEY,
  type VARCHAR(30),
  rooms INT,
  rent DECIMAL(10,2),
  ownerNo VARCHAR(5),
  staffNo VARCHAR(5),
  branchNo VARCHAR(5),
  FOREIGN KEY (ownerNo) REFERENCES PrivateOwner(ownerNo),
  FOREIGN KEY (staffNo) REFERENCES Staff(staffNo),
  FOREIGN KEY (branchNo) REFERENCES Branch(branchNo)
);`
  },
  {
    name: "Client",
    id: "client",
    hint: "Use clientNo as PRIMARY KEY. No foreign keys needed.",
    sample: `CREATE TABLE Client (
  clientNo VARCHAR(5) PRIMARY KEY,
  fName VARCHAR(30),
  lName VARCHAR(30),
  telNo VARCHAR(15),
  prefType VARCHAR(30),
  maxRent DECIMAL(10,2),
  email VARCHAR(50)
);`
  },
  {
    name: "PrivateOwner",
    id: "owner",
    hint: "Use ownerNo as PRIMARY KEY. Include personal contact details.",
    sample: `CREATE TABLE PrivateOwner (
  ownerNo VARCHAR(5) PRIMARY KEY,
  fName VARCHAR(30),
  lName VARCHAR(30),
  address VARCHAR(100),
  telNo VARCHAR(15),
  email VARCHAR(50),
  password VARCHAR(20)
);`
  },
  {
    name: "Viewing",
    id: "viewing",
    hint: "Composite PRIMARY KEY (clientNo, propertyNo, viewDate). Foreign keys to Client and PropertyForRent.",
    sample: `CREATE TABLE Viewing (
  clientNo VARCHAR(5),
  propertyNo VARCHAR(5),
  viewDate DATE,
  comments TEXT,
  PRIMARY KEY (clientNo, propertyNo, viewDate),
  FOREIGN KEY (clientNo) REFERENCES Client(clientNo),
  FOREIGN KEY (propertyNo) REFERENCES PropertyForRent(propertyNo)
);`
  }
];

function generateSection(table) {
  return `
<h3>${table.name} Table</h3>

<details><summary><strong>üí° Hint</strong></summary>
  <div class="hint">${table.hint}</div>
</details>

<details><summary><strong>üëÄ Show Sample Answer</strong></summary>
  <div class="sample">${table.sample}</div>
</details>

<textarea id="${table.id}" placeholder="Write your CREATE TABLE statement for ${table.name}..."></textarea>
<button onclick="check('${table.id}', '${table.name}')">Check Answer</button>

<div id="feedback_${table.id}" class="feedback"></div>
`;
}

function check(id, name) {
  const answer = document.getElementById(id).value.toLowerCase();
  let fb = "";

  if (answer.includes("create table")) {
    fb += `‚úÖ Your answer includes a CREATE TABLE statement.\n`;
  } else {
    fb += `‚ùå Missing CREATE TABLE keyword.\n`;
  }

  if (answer.includes("primary key")) {
    fb += `‚úÖ Primary key included.\n`;
  } else {
    fb += `‚ö†Ô∏è Consider including a PRIMARY KEY.\n`;
  }

  if (answer.includes("foreign key")) {
    fb += `‚úÖ Foreign key(s) detected.\n`;
  } else {
    fb += `‚ÑπÔ∏è If applicable, add FOREIGN KEY constraints.\n`;
  }

  document.getElementById(`feedback_${id}`).textContent = fb;
}
</script>

<div id="exerciseContainer">
  <script>
    document.getElementById("exerciseContainer").innerHTML = tables.map(generateSection).join('');
  </script>
</div>

</body>
</html>
